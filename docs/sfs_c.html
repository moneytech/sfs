<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<title>./sfs.c</title>
<!-- Source: ./sfs.c -->
<!-- Generated with ROBODoc Version 4.99.43 (Mar  7 2018) -->
</head>
<body>
<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./masterindex.html#top">Index</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_strutures.html#top">Structures</a>
</div> <!-- navigation -->
<div id="content">
<h3>TABLE OF CONTENTS</h3>
<ul>
<li>1. <a href="#robo0">sfs/sfs</a></li>
<ul>
<li>1.1. <a href="#robo5">sfs/sfs</a></li>
<ul>
<li>1.1.1. <a href="./sfs_fuse_c.html#robo1">sfs/sfs_fuse</a></li>
<li>1.1.2. <a href="#robo2">sfs/free_list_add</a></li>
<li>1.1.3. <a href="#robo3">sfs/free_list_del</a></li>
<li>1.1.4. <a href="#robo4">sfs/free_list_find</a></li>
<li>1.1.5. <a href="#robo6">sfs/sfs_resize</a></li>
<li>1.1.6. <a href="#robo7">sfs/sfs_super</a></li>
</ul>
</ul>
</ul>
<hr />
<a name="sfs2fsfs"></a>
<a name="robo0"></a><h2>sfs/sfs [ Modules ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_modules.html#robo_top_of_doc">Modules</a> ]</p>
<p class="item_name">NAME</p>
<pre>   <strong>sfs</strong> -- SFS implementation
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   Simple implementation of the SFS file system.
</pre>

<hr />
<a name="sfs2ffree5flist5fadd"></a>
<a name="robo2"></a><h2>sfs/free_list_add [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">sfs</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>    <strong>free_list_add</strong> -- add free block to the free list
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>    Adds new blocks into the free list.  If the blocks are before and/or
    after existing free list entries, the entries are merged.
    Blocks can only be merged with blocks which have delfile NULL.
</pre>
<p class="item_name">PARAMETERS</p>
<pre>    SFS - the SFS structure variable
    start - the block where the new free area starts
    length - the number of blocks in the new free area
</pre>
<p class="item_name">RETURN VALUE</p>
<pre>    Returns 0 on success and -1 on error.
</pre>

<hr />
<a name="sfs2ffree5flist5fdel"></a>
<a name="robo3"></a><h2>sfs/free_list_del [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">sfs</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>    <strong>free_list_del</strong> -- delete free block from free list
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>    Deletes free blocks from the free list, so that they can be used.
    Several free list entries can be deleted and at most one can be resized,
    so that the beginning is moved forward and the length becomes smaller.
    Deleted block entries are freed and if they reference a deleted file, it's
    deleted from the entry list.
</pre>
<p class="item_name">PARAMETERS</p>
<pre>    SFS - the SFS structure variable
    p_from - pointer to pointer to the block list entry where the search begins
    length - the number of blocks needed
</pre>
<p class="item_name">RETURN VALUE</p>
<pre>    Returns 0 on success and -1 on error.
</pre>

<hr />
<a name="sfs2ffree5flist5ffind"></a>
<a name="robo4"></a><h2>sfs/free_list_find [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">sfs</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>    <strong>free_list_find</strong> -- find consecutive free block in the free list
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>    Finds consecutive block entries starting from *start_block*.
</pre>
<p class="item_name">PARAMETERS</p>
<pre>    SFS - the SFS structure variable
    sfart_block - the minimum block number for the consecutive blocks
    length - minimum length of the consecutive blocks
</pre>
<p class="item_name">RETURN VALUE</p>
<pre>    Returns a pointer to pointer to the found block or NULL if could not find.
</pre>

<hr />
<a name="sfs2fsfs"></a>
<a name="robo5"></a><h2>sfs/sfs [ Structures ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo0">sfs</a> ] [ <a href="./robo_strutures.html#robo_top_of_doc">Structures</a> ]</p>
<p class="item_name">NAME</p>
<pre>   struct <strong>sfs</strong> -- the structure representing the current state of the
                 filesystem
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   When a filesystem is opened, this structure is created and must be
   accessible (passed as parameter) for every filesystem call.  This
   structure is known to the outside world as SFS and its fields are not
   accessed.  When the filesystem is closed the structure is freed and can
   no longer be used.
</pre>
<p class="item_name">FIELDS</p>
<pre>   file - the means to access filesystem data (is readable and writable)
   block_size - the size of the blocks to address data (also used for the
                filesystem
   super - pointer to the superblock structure
   volume - pointer to the volume entry
   entry_list - list of the entries in the index area
   free_list - list of the blocks that can be used to store data (each item
               of the list can represent several blocks)
   free_last - the last item of the free_list, is used to represent the free
               area, cannot be empty (in which case the filesystem should not
               be used)
   iter_curr - when reading the contents of a directory, the last found entry
               is stored here (no calls should be made between the first and
               the next calls to search a directory), it is reinitialized on
               each sfs_first call
</pre>

<hr />
<a name="sfs2fsfs5fresize"></a>
<a name="robo6"></a><h2>sfs/sfs_resize [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">sfs</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">NAME</p>
<pre>    <strong>sfs_resize</strong> -- resize a file
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>    Resize a file *path* to size *len*.  Truncate the file if its size
    is less than *len*.  Otherwise, fills with null characters.
</pre>
<p class="item_name">PARAMETERS</p>
<pre>    SFS - the SFS structure variable
    path - the absolute path of the file
    len - the new size for the file
</pre>
<p class="item_name">RETURN VALUE</p>
<pre>    Returns 0 on success and -1 on error.
</pre>

<hr />
<a name="sfs2fsfs5fsuper"></a>
<a name="robo7"></a><h2>sfs/sfs_super [ Structures ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo5">sfs</a> ] [ <a href="./robo_strutures.html#robo_top_of_doc">Structures</a> ]</p>
<p class="item_name">NAME</p>
<pre>   struct <strong>sfs_super</strong> -- structure for the superblock of the file system
</pre>
<p class="item_name">DESCRIPTION</p>
<pre>   The structure *struct <strong>sfs_super</strong>* is read from the superblock of the
   file system and contains information about it.
</pre>
<p class="item_name">FIELDS</p>
<pre>   time_stamp - date/time when the volume was changed
   data_size - size of the Data Area in blocks
   index_size - size of the Index Area in bytes
   total_blocks - total size of the filesystem in blocks
   resvd_blocks - number of bytes used by the Superblock and by
                  the Reserved Area, indicates the first block of the
                  Data Area
   block_size - number of bytes in a block
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./sfs.c with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.43 on Fri Oct 26 2018 14:38:18
</p>
</div> <!-- footer -->
</body>
</html>
